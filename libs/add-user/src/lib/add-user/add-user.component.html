<div mat-dialog-title class="d-flex justify-content-between">
  <h1>{{ data ? 'Edit' : 'Add' }} User </h1>
  <button class="ml-auto" mat-icon-button mat-dialog-close="">
    <mat-icon>close</mat-icon>
  </button>
</div>

<form id="add-user-form" mat-dialog-content [formGroup]="form" (ngSubmit)="addUser()">
  <fieldset>
    <legend><h2>General Info</h2></legend>
    <div class="d-flex flex-wrap">
      <div class="col-lg-4">
        <mat-form-field appearance="outline">
          <mat-label>Username</mat-label>
          <input formControlName="username" matInput placeholder="Enter Username">
        </mat-form-field>
      </div>
      <div class="col-lg-4">
        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input formControlName="firstName" matInput placeholder="Enter First Name">
        </mat-form-field>
      </div>
      <div class="col-lg-4">
        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input formControlName="lastName" matInput placeholder="Enter Last Name">
        </mat-form-field>
      </div>
      <div class="col-lg-4">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input type="email" formControlName="email" matInput placeholder="Enter Email">
        </mat-form-field>
      </div>
      <div class="col-lg-4">
        <mat-form-field appearance="outline">
          <mat-label>Phone</mat-label>
          <input type="tel" formControlName="phone" matInput placeholder="Enter Phone Number">
        </mat-form-field>
      </div>
    </div>
  </fieldset>
  <fieldset>
    <legend><h2>User Allocation</h2></legend>
    <div class="p-2 mb-3">
      <mat-checkbox formControlName="depotAllocated" color="primary">
        Allocate to Depot
      </mat-checkbox>
      <div class="p-2 pt-4" *ngIf="depotAllocatedControl.value">

<!--        <div class="d-flex align-items-center">-->
<!--          <button type="button"-->
<!--                  mat-button color="primary" (click)="addDepotToAllocateTo = !addDepotToAllocateTo"-->
<!--          >-->
<!--            <mat-icon>{{ addDepotToAllocateTo ? 'add_circle_outline' : 'remove_circle_outline' }}</mat-icon>-->
<!--            <mat-icon></mat-icon>-->
<!--            Add Depot to allocate to-->
<!--          </button>-->
<!--          <ng-container *ngIf="addDepotToAllocateTo">-->
<!--            <mat-form-field appearance="outline">-->
<!--              <mat-label>Depot Selection</mat-label>-->
<!--              <mat-select [(ngModel)]="currentDepotSelection" [ngModelOptions]="{standalone: true}">-->
<!--                <mat-option *ngFor="let item of depots$ | async" [value]="item.id">-->
<!--                  {{ item.depotName }}-->
<!--                </mat-option>-->
<!--              </mat-select>-->
<!--              <mat-hint>Select depot to allocate to the user.</mat-hint>-->
<!--            </mat-form-field>-->
<!--            <button class="ms-2" type="button" mat-raised-button color="primary">Add</button>-->
<!--          </ng-container>-->

<!--        </div>-->
        <div>

          <table mat-table [dataSource]="depots$">
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox color="primary">
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox color="primary">
                </mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="depotName">
              <th mat-header-cell *matHeaderCellDef> #ID</th>
              <td mat-cell *matCellDef="let element"> {{element.depotName}} </td>
            </ng-container>
            <ng-container matColumnDef="userType">
              <th mat-header-cell *matHeaderCellDef> User Type</th>
              <td mat-cell *matCellDef="let element">
                <mat-radio-group color="primary" aria-label="Select an option">
                  <mat-radio-button value="1">User</mat-radio-button>
                  <mat-radio-button value="2">Admin User</mat-radio-button>
                </mat-radio-group>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedDepotColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedDepotColumns;"></tr>
          </table>
        </div>
      </div>
    </div>
    <div class="p-2 mb-3">
      <mat-checkbox color="primary">
        Allocate to Transporter
      </mat-checkbox>
    </div>
    <div class="p-2 mb-3">
      <mat-checkbox color="primary">
        Allocate to Dealer
      </mat-checkbox>
    </div>
  </fieldset>

</form>

<div mat-dialog-actions>
  <button mat-dialog-close="" mat-button color="primary">Cancel</button>
  <button form="add-user-form" mat-raised-button color="primary"
          [disabled]="form.invalid">{{ data ? 'Update' : 'Save' }}</button>
</div>
